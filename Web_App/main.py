import os, time, subprocess, webbrowser

subprocess.Popen('python -c "import http.server, socketserver; socketserver.TCPServer((\'127.0.0.1\', 8000), http.server.SimpleHTTPRequestHandler).serve_forever()"', stdin=subprocess.PIPE, stderr=subprocess.PIPE, stdout=subprocess.PIPE, shell=True)

webbrowser.get("C:/Program Files (x86)/Google/Chrome/Application/chrome.exe %s").open("127.0.0.1:8000/front_end/basic_info.html")
    
answers_path = "C:/Users/" + os.getlogin() + "/Downloads/"
main_path = "E:/Personal Projects/PsychAI/Project Files/Web_App/v3/"

while True:
    directory_contents = os.listdir(answers_path)
    if "end.txt" in directory_contents: break
    else: time.sleep(0.1)
    
msg = "Inputs Completion Detected!"
print(msg); open("outputs/output_status.txt", "w").write(msg)

from input import data
(base_sentences, combined_answers, predicted_facial_labels, predicted_speech_labels) = data(answers_path, main_path)

"""
predicted_facial_labels = ["Angry", "Sad", "Happy", "Disgust", "Fear", "Neutral", "Surprise", "Angry", "Sad", "Happy", "Disgust", "Fear", "Neutral", "Surprise", "Angry", "Sad", "Happy", "Disgust", "Fear", "Neutral", "Surprise", "Angry", "Sad", "Happy", "Disgust", "Fear", "Neutral", "Surprise", "Angry", "Sad", "Happy", "Disgust", "Fear", "Neutral", "Surprise", "Angry", "Sad", "Happy", "Disgust", "Fear", "Neutral", "Surprise", "Angry", "Sad", "Happy", "Disgust", "Fear", "Neutral", "Surprise", "Angry", "Sad", "Happy", "Disgust", "Fear", "Neutral", "Surprise", "Angry", "Sad", "Happy", "Disgust", "Fear", "Neutral", "Surprise", "Angry", "Sad", "Happy", "Disgust", "Fear", "Neutral", "Surprise", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Angry", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral", "Neutral"]
    
predicted_speech_labels = ["calm", "happy", "fearful", "disgust", "calm", "happy", "fearful", "disgust", "calm", "happy", "fearful", "disgust", "calm", "happy", "fearful", "disgust", "calm", "happy", "fearful", "disgust","calm", "happy", "fearful", "disgust","calm", "happy", "fearful", "disgust", "calm", "happy", "fearful", "disgust", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "calm", "fearful", "fearful", "fearful", "fearful", "fearful", "fearful", "fearful", "fearful", "fearful", "fearful", "fearful", "fearful", "fearful"]
    
combined_answers = "N. is a 19 year old single caucasian female, who is attending university and works part-time as a cashier for a pizza restaurant. She has a history of recurrent depressive episodes, which starts in the late fall/early winter months, and remits during the spring. She uses light therapy every morning for 30 minutes, as without it, she would be unable to function. Although her family doctor has recommended that she consider antidepressant medication treatment, N. has adamantly refused, stating that it is unnatural, as she tries to ingest healthy and natural foods. When she becomes depressed, she has symptoms of low moods, anhedonia, excessive fatigue, excessive sleep, increased appetite, carbohydrate cravings, and weight gain.Her family history is significant for her mother suffering from bipolar disorder, and who dies in a car accident when N. was only 12 years old. It is highly suspected that the car accident was a suicide. N. has refused to see a therapist, stating she does not need psychological help, and that she can deal with her mother’s death on her own. After the death of her mother, she and her brother were sent to live with their estranged father and step-mother, and their infant daughter, N.’s half-sister. She is the oldest of 3 siblings. Suffice it to say, N. did not get along well with her father and step-mother, and was jealous of all the attention her infant sister got from the family. When N. became depressed in the winter months, she locked herself in her room, and would sleep constantly, not contributing to the chores the family needed. When she was not sleeping, she would leave and spend days with her friends, without any check-ins with her parents.Eventually,she ran away from home after her graduation from high school, and was not found until her father shamed her on Facebook that his daughter was missing and is now a runaway. Humiliated, N. contacted her father and assured him she was safe.She eventually enrolled in university, and only has cursory contact with her father and siblings. Her first year in university was difficult, and she almost failed her classes due to sleeping too much when her depression would worsen like clockwork in the fall and winter.When spring would come around, she would have increased energy and could work for 12 hours a day and go out with her friends at night with only minimal sleep. She spends her summer doing lots of outdoor activities, as she likes to soak in the sun, and dreads each day after June 21st, when the sun exposure would decrease little by little with each passing day. Diagnosis: Major depressive disorder, recurrent, in partial remission, with seasonal pattern. Rule-out bipolar disorder, given the history of hypomanic symptoms, and family history of bipolar disorder. The patient had only a partial response to the current dose of light therapy.Treatment: 1) Will increase light therapy duration to 60 minutes every morning, from a 10,000 lux light box. Will need to monitor for any signs of mania, as light therapy may switch someone with an underlying bipolar disorder from depression to mania.2) If no response in 1 to 2 weeks, then consider augmenting light therapy with cognitive behavioral therapy (CBT).3) Recommend other helpful strategies for depression, including exercise, meditation, yoga, and outdoor time to increase sunlight exposure.4) Treatment with antidepressant medications is a relative contraindication, as bipolar disorder has not been ruled out.5) Return to clinic in 2 weeks for follow-up."
    
base_sentences = ""
"""

from output import deliverables
deliverables(base_sentences, combined_answers, predicted_facial_labels, predicted_speech_labels)